<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="735px" preserveAspectRatio="none" style="width:539px;height:735px;" version="1.1" viewBox="0 0 539 735" width="539px" zoomAndPan="magnify"><defs><filter height="300%" id="f1xoio57s6g8vq" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="259" x2="259" y1="38.2969" y2="695.6797"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="401.5" x2="401.5" y1="38.2969" y2="695.6797"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="496.5" x2="496.5" y1="38.2969" y2="695.6797"/><rect fill="#FEFECE" filter="url(#f1xoio57s6g8vq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="58" x="228" y="3"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="235" y="22.9951">Kernel</text><rect fill="#FEFECE" filter="url(#f1xoio57s6g8vq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="58" x="228" y="694.6797"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="235" y="714.6748">Kernel</text><rect fill="#FEFECE" filter="url(#f1xoio57s6g8vq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="352.5" y="3"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="359.5" y="22.9951">printer_task</text><rect fill="#FEFECE" filter="url(#f1xoio57s6g8vq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="352.5" y="694.6797"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="359.5" y="714.6748">printer_task</text><rect fill="#FEFECE" filter="url(#f1xoio57s6g8vq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="461.5" y="3"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="468.5" y="22.9951">tty_task</text><rect fill="#FEFECE" filter="url(#f1xoio57s6g8vq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="461.5" y="694.6797"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="468.5" y="714.6748">tty_task</text><path d="M38,53.2969 L38,259.2969 L250,259.2969 L250,63.2969 L240,53.2969 L38,53.2969 " fill="#FBFB77" filter="url(#f1xoio57s6g8vq)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M240,53.2969 L240,63.2969 L250,63.2969 L240,53.2969 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#006400" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="50" x="44" y="70.3638">mpx.s/</text><text fill="#0000FF" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="94" y="70.3638">minix</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="52" y="85.4966">call</text><text fill="#0000FF" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="73" y="85.4966">main</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="52" y="100.6294"/><text fill="#006400" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="52" y="100.6294">main.c/</text><text fill="#0000FF" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="106" y="100.6294">main</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="60" y="115.7622"/><text fill="#000000" font-family="Helvetica" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="126" x="60" y="115.7622">setup process table</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="60" y="130.895"/><text fill="#006400" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51" x="60" y="130.895">proc.c/</text><text fill="#0000FF" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="71" x="111" y="130.895">pick_proc</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="206" y="130.895"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="68" y="146.0278"/><text fill="#FF0000" font-family="Helvetica" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="140" x="68" y="146.0278">proc_ptr=printer_task</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="60" y="161.1606"/><text fill="#0000FF" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="50" x="60" y="161.1606">restart</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="170" y="161.1606"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="68" y="176.2935"/><text fill="#FF0000" font-family="Helvetica" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="105" x="68" y="176.2935">mov sp,proc_ptr</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="189" y="176.2935"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="68" y="191.4263">pop ax,bx,cx,dx,si,di,bp,es</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="68" y="206.5591"/><text fill="#000000" font-family="Helvetica" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="129" x="68" y="206.5591">restore splimit,sp,ss</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="68" y="221.6919">push psw</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="68" y="236.8247"/><text fill="#FF0000" font-family="Helvetica" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="72" x="68" y="236.8247">push cs, pc</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="68" y="251.9575">iret</text><polygon fill="#A80036" points="390,286.1563,400,290.1563,390,294.1563,394,290.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="259" x2="396" y1="290.1563" y2="290.1563"/><text fill="#0000FF" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="270" y="285.0903">iret</text><path d="M154,303.1563 L154,373.1563 L393,373.1563 L393,313.1563 L383,303.1563 L154,303.1563 " fill="#FBFB77" filter="url(#f1xoio57s6g8vq)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M383,303.1563 L383,313.1563 L393,313.1563 L383,303.1563 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#006400" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="68" x="160" y="320.2231">printer.c/</text><text fill="#0000FF" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="89" x="228" y="320.2231">printer_task</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="168" y="335.356"/><text fill="#0000FF" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="168" y="335.356">print_init</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="168" y="350.4888"/><text fill="#006400" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="114" x="168" y="350.4888">lib.a/sendrec.s/</text><text fill="#0000FF" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96" x="282" y="350.4888">receive(ANY)</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="176" y="365.6216"/><text fill="#FF0000" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="92" x="176" y="365.6216">INT SYS_VEC</text><polygon fill="#A80036" points="270,399.8203,260,403.8203,270,407.8203,266,403.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="264" x2="401" y1="403.8203" y2="403.8203"/><text fill="#0000FF" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="280" y="398.7544">Software Interrupt</text><path d="M8,416.8203 L8,607.8203 L250,607.8203 L250,426.8203 L240,416.8203 L8,416.8203 " fill="#FBFB77" filter="url(#f1xoio57s6g8vq)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M240,416.8203 L240,426.8203 L250,426.8203 L240,416.8203 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#008000" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="68" x="14" y="433.8872">mpx88.s/</text><text fill="#0000FF" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="82" y="433.8872">s_call</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="22" y="449.02">call</text><text fill="#0000FF" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="47" y="449.02">save</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="22" y="464.1528"/><text fill="#006400" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51" x="22" y="464.1528">proc.c/</text><text fill="#0000FF" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="56" x="73" y="464.1528">sys_call</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="30" y="479.2856"/><text fill="#0000FF" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="104" x="30" y="479.2856">mini_rec(ANY)</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="166" y="479.2856"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="38" y="494.4185"/><text fill="#FF0000" font-family="Helvetica" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="197" x="38" y="494.4185">printer-&gt;p_flags |= RECEIVING</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="38" y="509.5513"/><text fill="#0000FF" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="122" x="38" y="509.5513">unready(printer)</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="46" y="524.6841"/><text fill="#008000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="46" y="524.6841">klib88.x/</text><text fill="#0000FF" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="98" y="524.6841">lock</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="46" y="539.8169"/><text fill="#0000FF" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="71" x="46" y="539.8169">pick_proc</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="54" y="554.9497"/><text fill="#FF0000" font-family="Helvetica" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="116" x="54" y="554.9497">proc_ptr=tty_task</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="46" y="570.0825"/><text fill="#008000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="46" y="570.0825">klib88.x/</text><text fill="#0000FF" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="98" y="570.0825">restore</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="22" y="585.2153"/><text fill="#000000" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="22" y="585.2153">jmp</text><text fill="#0000FF" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="50" x="55" y="585.2153">restart</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="30" y="600.3481">iret</text><polygon fill="#A80036" points="485,634.5469,495,638.5469,485,642.5469,489,638.5469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="259" x2="491" y1="638.5469" y2="638.5469"/><text fill="#0000FF" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="270" y="633.481">iret</text><path d="M370,651.5469 L370,676.5469 L488,676.5469 L488,661.5469 L478,651.5469 L370,651.5469 " fill="#FBFB77" filter="url(#f1xoio57s6g8vq)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M478,651.5469 L478,661.5469 L488,661.5469 L478,651.5469 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#008000" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="376" y="668.6138">tty.c/</text><text fill="#0000FF" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="59" x="414" y="668.6138">tty_task</text><!--MD5=[7b509481c05607853fc5fedd06a2cb85]
@startuml
participant Kernel
participant printer_task
participant tty_task
skinparam defaultFontName Helvetica

note left of Kernel
**<color darkgreen>mpx.s/<color blue>minix </color>**
  call**<color blue>main</color>**
  **<color darkgreen>main.c/<color blue>main </color>**
    //setup process table //
    **<color darkgreen>proc.c/<color blue>pick_proc</color>**      
      //<color red>proc_ptr=printer_task</color>//
    **<color blue>restart</color>**               
      //<color red>mov sp,proc_ptr</color>//    
      pop ax,bx,cx,dx,si,di,bp,es
      //restore splimit,sp,ss//
      push psw
      //<color red>push cs, pc</color>//
      iret  
end note


Kernel->printer_task:<color blue> iret</color>
note left of printer_task
**<color darkgreen>printer.c/<color blue>printer_task </color>**
  <color blue>print_init</color>
  **<color darkgreen>lib.a/sendrec.s/<color blue>receive(ANY)**
    **<color red>INT SYS_VEC</color>**
end note


printer_task->Kernel:<color blue> Software Interrupt</color>
note left of Kernel
**<color green>mpx88.s/<color blue>s_call</color>**
  call <color blue>save</color>
  **<color darkgreen>proc.c/<color blue>sys_call</color>**
    **<color blue>mini_rec(ANY)</color>**        
      //<color red>printer->p_flags |= RECEIVING</color>//
      **<color blue>unready(printer)</color>**
        <color green>klib88.x/<color blue>lock</color>
        **<color blue>pick_proc</color>**
          //<color red>proc_ptr=tty_task</color>//
        <color green>klib88.x/<color blue>restore</color>
  **jmp <color blue>restart</color>**
    iret                   
end note

Kernel->tty_task:<color blue> iret</color>
note left of tty_task
**<color green>tty.c/<color blue>tty_task</color>**
end note

@enduml

PlantUML version 1.2019.11(Sun Sep 22 11:02:15 BST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.6+10-post-Ubuntu-1ubuntu119.10.1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>